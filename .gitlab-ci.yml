stages:
  - test

default:
  tags:
    - common

TestCode:
  stage: test
  before_script:
    - pip install pytest-cov
    - pip install pytest
    - pip install coverage
    - pip install -r src/requirements.txt
  script:
    - PYTHONPATH=src python -m pytest --cov=src --cov-report=xml:coverage.xml --cov-report=html --cov-report=term --cov-report=annotate --cov-report=term-missing
  artifacts:
    untracked: false
    paths:
      - coverage.xml
      - htmlcov/
    reports:
      junit:
      - coverage.xml
